# プロンプト設定ファイル仕様書

このドキュメントは、本プロジェクトで利用するプロンプト設定ファイルの構造・記述例・注意点・利用方法について説明します。

---

## 1. 概要

プロンプト設定は以下の3つのYAMLファイルで管理します：

- `input/global_config.yaml`: 全体の画風や条件
- `input/character_config.yaml`: キャラクターの特徴
- `input/scenes_config.yaml`: 各シーンの構図やセリフ

これらのファイルを組み合わせて、LINEスタンプ画像生成のためのプロンプトを構築します。

---

## 2. 各ファイルの構造

### global_config.yaml
```yaml
style: "..."         # 画風や雰囲気など
layout: "..."        # グリッドやキャンバス条件
margin: "..."        # 余白や配置条件
background: "..."    # 背景の描写方針
speech: "セリフを含める、日本語で、短いものが好ましい" # セリフの扱い
character_placement: "..." # キャラ配置の方針
```

### character_config.yaml
```yaml
キャラ名:
  description:
    - "特徴1"
    - "特徴2"
    ...
```

### scenes_config.yaml
```yaml
scenes:
  - "コマ1の構図やセリフ"
  - "コマ2の構図やセリフ"
  ...
```

---

## 3. 記述例

> **注意：OpenAIの画像生成APIでは、プロンプトが短いほどトークン消費（費用）が抑えられます。必要な情報は残しつつ、無駄な説明や重複は省いて簡潔に記述するのが推奨されます。**

### global_config.yaml
```yaml
style: "日本のkawaii手描き風、太めの黒輪郭、パステル調"
layout: "3×3正方形グリッド、透明キャンバス"
margin: "キャラ周囲に十分な余白、分割しやすい配置"
background: "シンプル。必要なら最小限の小物のみ"
speech: "セリフを含める、日本語で、短いものが好ましい"
character_placement: "キャラは1体または2体、中央に配置、外周は透明"
```

### character_config.yaml
```yaml
うしくん:
  description:
    - "白い顔、右目にグレーのぶち"
    - "ピンクの鼻先（輪郭線なし）、横長楕円の鼻孔"
    - "黄色い丸い角2本"
    - "ネイビーのスーツ"
    - "落ち着いたor少し疲れた表情"
    - "所有物に牛の鼻輪をモチーフとしたブランドロゴ"
ぶたくん:
  description:
    - "ピンク色の丸顔、小さな三角耳"
    - "縦穴2つの大きな豚鼻"
    - "くるくる巻いたしっぽ"
    - "茶色のダブルスーツ＋白シャツ"
    - "陽気・おちゃめ・焦り・嬉しさなど豊かな表情"
    - "所有物に豚鼻をモチーフとしたブランドロゴ"
```

### scenes_config.yaml
```yaml
scenes:
  - "ぶたくんがモニター前で「ビルド中…」とつぶやく"
  - "うしくんが配線図と半田ごてを見て「ここが怪しい」"
  - "ぶたくんが画面に向かって「動け～！」と叫ぶ"
  - "うしくんがJTAGケーブルを持って「つないだ！」"
  - "ぶたくんが肩を落として「またエラーかよ…」"
  - "うしくんが「ERROR」表示を見てため息"
  - "ぶたくんが「これどう思う？」とうしくんに聞く"
  - "うしくんが図面を見ながら「うーん…」とうなる"
  - "2人が笑顔で「通った！！」とガッツポーズ"
```

---

## 4. 注意点・ベストプラクティス

- **キャラ名はcharacter_config.yamlで定義し、scenes_config.yamlではその名称を使うことで、詳細な特徴を自動展開できます。**
- **global_config.yamlの条件は全てのシーンのプロンプト先頭に自動付加されます。**
- **scenes_config.yamlの各要素は1コマ分の構図・セリフを日本語で簡潔に記述してください。**
- **YAMLのインデントやコロン、ダブルクォートの閉じ忘れに注意してください。**
- **キャラ名や特徴はAIが理解しやすい表現で記述してください。**
- **プロンプトが長くなりすぎる場合は、重要な特徴を優先して記述してください。**

---

## 5. どのように利用されるか

- Pythonスクリプトで各YAMLをロードし、
    - global_config.yamlの条件を先頭に付加
    - scenes_config.yaml内のキャラ名をcharacter_config.yamlの詳細説明で置換
    - 1コマごとにプロンプトを自動生成
- 生成AI（OpenAI API等）にプロンプトとして渡し、画像を一括生成します。
- キャラクターやシーンの追加・修正もYAML編集だけで柔軟に対応できます。

---

## 6. よくある質問

- **Q. キャラ名を英語にしてもいいですか？**
  - A. 問題ありませんが、AIが理解しやすいよう特徴説明は日本語または英語で詳細に記述してください。
- **Q. シーン数は9個でなくてもいいですか？**
  - A. 問題ありません。必要な数だけ記述できます。
- **Q. 複数キャラを同時に登場させたい場合は？**
  - A. scenes_config.yaml内で「AとBが…」のように複数キャラ名を記述してください。

--- 